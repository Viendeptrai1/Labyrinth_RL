{
  "paragraphs": [
    {
      "title": "1. Setup",
      "text": "%pyspark\nimport sys\nsys.path.insert(0, '/src')\n\nimport numpy as np\nfrom labyrinth_env import LabyrinthEnv, ZeppelinBridge\nfrom labyrinth_env.env import EnvConfig\n\nprint(\"Labyrinth RL - 2D Game\")\nprint(\"=\"*40)",
      "user": "anonymous",
      "config": {
        "colWidth": 12,
        "fontSize": 9,
        "enabled": true,
        "results": {},
        "editorSetting": {"language": "python", "editOnDblClick": false},
        "editorMode": "ace/mode/python"
      },
      "id": "para_setup"
    },
    {
      "title": "2. Initialize Game",
      "text": "%pyspark\nconfig = EnvConfig(\n    dt=1.0/60.0,\n    max_steps=5000,\n    steps_per_move=15\n)\n\nbridge = ZeppelinBridge(z, config=config)\nresult = bridge.init_game('level_01_tutorial')\n\nstate = bridge.get_state()\nz.angularBind('state', state)\nz.angularBind('ball', state.get('ball', {}))\nz.angularBind('status', 'Ready!')\nz.angularBind('step_count', 0)\n\nprint(f\"Level: {result['info']['level_id']}\")\nprint(f\"Ball: {state['ball']['position']}\")\nprint('Click board, then use WASD to play!')",
      "user": "anonymous",
      "config": {
        "colWidth": 12,
        "fontSize": 9,
        "enabled": true,
        "results": {},
        "editorSetting": {"language": "python", "editOnDblClick": false},
        "editorMode": "ace/mode/python"
      },
      "id": "para_init"
    },
    {
      "title": "3. Game UI",
      "text": "%angular\n<style>\n    .game-container { display: flex; gap: 25px; padding: 15px; font-family: Arial; user-select: none; }\n    .board-view {\n        position: relative; width: 540px; height: 540px;\n        background: linear-gradient(135deg, #DEB887, #D2B48C);\n        border: 12px solid #8B4513; border-radius: 10px;\n        box-shadow: inset 0 0 30px rgba(0,0,0,0.3), 0 8px 20px rgba(0,0,0,0.3);\n        outline: none;\n    }\n    .board-view:focus { border-color: #28a745; box-shadow: 0 0 0 5px rgba(40,167,69,0.6), inset 0 0 30px rgba(0,0,0,0.3); }\n    .ball {\n        position: absolute; width: 28px; height: 28px;\n        background: radial-gradient(circle at 30% 30%, #fff, #bbb, #666);\n        border-radius: 50%; transform: translate(-50%, -50%);\n        box-shadow: 4px 4px 8px rgba(0,0,0,0.5);\n    }\n    .goal {\n        position: absolute; width: 44px; height: 44px;\n        background: radial-gradient(circle, #000 35%, #222 55%, #000);\n        border-radius: 50%; transform: translate(-50%, -50%);\n        box-shadow: inset 0 0 12px rgba(0,255,0,0.3);\n    }\n    .goal::after {\n        content: ''; position: absolute; top: 50%; left: 50%;\n        width: 22px; height: 22px;\n        background: radial-gradient(circle, #0f0, #080);\n        border-radius: 50%; transform: translate(-50%, -50%);\n        animation: pulse 1s infinite;\n    }\n    @keyframes pulse { 0%,100%{opacity:1;transform:translate(-50%,-50%) scale(1);} 50%{opacity:0.5;transform:translate(-50%,-50%) scale(0.7);} }\n    .wall {\n        position: absolute;\n        background: linear-gradient(180deg, #A0522D, #8B4513, #6B3410);\n        border: 2px solid #4A2508; border-radius: 4px;\n        box-shadow: 2px 2px 4px rgba(0,0,0,0.4);\n    }\n    .hole {\n        position: absolute;\n        background: radial-gradient(circle, #000 60%, #333);\n        border-radius: 50%; transform: translate(-50%, -50%);\n        box-shadow: inset 0 0 12px #000;\n    }\n    .coin {\n        position: absolute; width: 22px; height: 22px;\n        background: radial-gradient(circle at 30% 30%, #ffd700, #daa520, #b8860b);\n        border-radius: 50%; transform: translate(-50%, -50%);\n        box-shadow: 0 0 10px #ffd700, 0 2px 4px rgba(0,0,0,0.3);\n    }\n    .controls { padding: 20px; background: #f8f9fa; border-radius: 10px; min-width: 280px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }\n    .hud { padding: 15px; background: #1a1a1a; color: #0f0; font-family: 'Courier New', monospace; border-radius: 8px; margin-bottom: 18px; font-size: 16px; }\n    .direction-pad { display: grid; grid-template-columns: repeat(3, 65px); gap: 6px; justify-content: center; }\n    .dir-btn {\n        width: 65px; height: 65px; font-size: 24px; font-weight: bold;\n        cursor: pointer; border: 2px solid #444; border-radius: 10px;\n        background: linear-gradient(180deg, #fff, #e5e5e5);\n        transition: all 0.1s;\n    }\n    .dir-btn:hover { background: linear-gradient(180deg, #e0f0ff, #b8d4f0); border-color: #007bff; transform: scale(1.02); }\n    .dir-btn:active { background: #28a745 !important; color: white !important; transform: scale(0.95); }\n    .status-success { color: #0f0; font-size: 22px; font-weight: bold; text-shadow: 0 0 10px #0f0; }\n    .status-failed { color: #f00; font-size: 22px; font-weight: bold; }\n    .hint { margin-top:15px; padding:12px; background:#e9ecef; border-radius:6px; font-size:14px; line-height: 1.6; }\n</style>\n\n<div class=\"game-container\">\n    <div class=\"board-view\" tabindex=\"0\"\n         ng-keydown=\"\n            $event.preventDefault();\n            (($event.key=='w'||$event.key=='W'||$event.key=='ArrowUp') && z.runParagraph('para_up'));\n            (($event.key=='s'||$event.key=='S'||$event.key=='ArrowDown') && z.runParagraph('para_down'));\n            (($event.key=='a'||$event.key=='A'||$event.key=='ArrowLeft') && z.runParagraph('para_left'));\n            (($event.key=='d'||$event.key=='D'||$event.key=='ArrowRight') && z.runParagraph('para_right'));\n            (($event.key=='q'||$event.key=='Q') && z.runParagraph('para_upleft'));\n            (($event.key=='e'||$event.key=='E') && z.runParagraph('para_upright'));\n            (($event.key=='z'||$event.key=='Z') && z.runParagraph('para_downleft'));\n            (($event.key=='c'||$event.key=='C') && z.runParagraph('para_downright'));\n            (($event.key=='r'||$event.key=='R') && z.runParagraph('para_reset'));\n         \">\n        <!-- Goal -->\n        <div class=\"goal\" ng-repeat=\"e in state.entities\" ng-if=\"e.type=='GOAL'\"\n             ng-style=\"{left: (270 + e.components.TransformComponent.position[0] * 45) + 'px', \n                        top: (270 - e.components.TransformComponent.position[1] * 45) + 'px'}\"></div>\n        <!-- Walls -->\n        <div class=\"wall\" ng-repeat=\"e in state.entities\" ng-if=\"e.type=='WALL'\"\n             ng-style=\"{left: (270 + e.components.TransformComponent.position[0]*45 - e.components.TransformComponent.scale[0]*22.5) + 'px',\n                        top: (270 - e.components.TransformComponent.position[1]*45 - e.components.TransformComponent.scale[1]*22.5) + 'px',\n                        width: e.components.TransformComponent.scale[0]*45 + 'px',\n                        height: e.components.TransformComponent.scale[1]*45 + 'px'}\"></div>\n        <!-- Holes -->\n        <div class=\"hole\" ng-repeat=\"e in state.entities\" ng-if=\"e.type=='HOLE'\"\n             ng-style=\"{left: (270 + e.components.TransformComponent.position[0]*45) + 'px',\n                        top: (270 - e.components.TransformComponent.position[1]*45) + 'px',\n                        width: e.components.TransformComponent.scale[0]*45 + 'px',\n                        height: e.components.TransformComponent.scale[1]*45 + 'px'}\"></div>\n        <!-- Coins -->\n        <div class=\"coin\" ng-repeat=\"e in state.entities\" ng-if=\"e.type=='COIN'\"\n             ng-style=\"{left: (270 + e.components.TransformComponent.position[0]*45) + 'px',\n                        top: (270 - e.components.TransformComponent.position[1]*45) + 'px'}\"></div>\n        <!-- Ball -->\n        <div class=\"ball\" ng-if=\"ball.position\"\n             ng-style=\"{left: (270 + ball.position[0] * 45) + 'px', top: (270 - ball.position[1] * 45) + 'px'}\"></div>\n    </div>\n    \n    <div class=\"controls\">\n        <div class=\"hud\">\n            <div>Score: {{ball.inventory.total_score || 0}}</div>\n            <div>Steps: {{step_count}}</div>\n            <div ng-class=\"{'status-success': status=='SUCCESS!', 'status-failed': status=='FAILED!'}\">{{status}}</div>\n        </div>\n        \n        <div class=\"direction-pad\">\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_upleft')\">&#8598;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_up')\">&#9650;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_upright')\">&#8599;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_left')\">&#9664;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_reset')\" style=\"background:#ffc107;\">&#8635;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_right')\">&#9654;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_downleft')\">&#8601;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_down')\">&#9660;</button>\n            <button class=\"dir-btn\" ng-click=\"z.runParagraph('para_downright')\">&#8600;</button>\n        </div>\n        \n        <div class=\"hint\">\n            <b>Click board first!</b><br>\n            WASD / Arrows = Move<br>\n            Q/E/Z/C = Diagonal<br>\n            R = Reset<br>\n            <b>Goal:</b> Reach green hole!\n        </div>\n    </div>\n</div>",
      "user": "anonymous",
      "config": {
        "colWidth": 12,
        "fontSize": 9,
        "enabled": true,
        "results": {},
        "editorSetting": {"language": "text", "editOnDblClick": false},
        "editorMode": "ace/mode/text"
      },
      "id": "para_ui"
    },
    {
      "title": "Up",
      "text": "%pyspark\nr = bridge.move_up()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_up"
    },
    {
      "title": "Down",
      "text": "%pyspark\nr = bridge.move_down()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_down"
    },
    {
      "title": "Left",
      "text": "%pyspark\nr = bridge.move_left()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_left"
    },
    {
      "title": "Right",
      "text": "%pyspark\nr = bridge.move_right()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_right"
    },
    {
      "title": "UpLeft",
      "text": "%pyspark\nr = bridge.move_upleft()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_upleft"
    },
    {
      "title": "UpRight",
      "text": "%pyspark\nr = bridge.move_upright()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_upright"
    },
    {
      "title": "DownLeft",
      "text": "%pyspark\nr = bridge.move_downleft()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_downleft"
    },
    {
      "title": "DownRight",
      "text": "%pyspark\nr = bridge.move_downright()\nz.angularBind('state', bridge.get_state())\nz.angularBind('ball', bridge.get_state().get('ball', {}))\nz.angularBind('step_count', bridge.env._step_count)\nif r['done']: z.angularBind('status', 'SUCCESS!' if r['info'].get('success') else 'FAILED!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_downright"
    },
    {
      "title": "Reset",
      "text": "%pyspark\nbridge.reset()\nstate = bridge.get_state()\nz.angularBind('state', state)\nz.angularBind('ball', state.get('ball', {}))\nz.angularBind('status', 'Ready!')\nz.angularBind('step_count', 0)\nprint('Reset!')",
      "user": "anonymous",
      "config": {"colWidth": 4, "fontSize": 9, "enabled": true, "results": {}, "editorHide": true},
      "id": "para_reset"
    }
  ],
  "name": "01_Labyrinth_Game",
  "id": "labyrinth_game_001",
  "defaultInterpreterGroup": "spark",
  "version": "0.10.0",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {},
  "config": {
    "isZeppelinNotebookCronEnable": false,
    "looknfeel": "default",
    "personalizedMode": "false"
  },
  "info": {}
}
